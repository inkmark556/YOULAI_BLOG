---
import posts from '../content/posts.json';
const allPosts = posts;
---

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youlai Note | 游戏开发笔记</title>
    <!-- 使用与 Admin Dashboard 相同的 CSS -->
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/background.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/posts.css">
    <link rel="stylesheet" href="/css/model.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <div class="bg-layer">
        <div class="bg-stripes"></div>
        <div class="bg-dots"></div>
        <div class="shape shape-star" style="top: 10%; left: 10%; animation-duration: 8s;">★</div>
        <div class="shape shape-star"
            style="top: 50%; right: 15%; animation-duration: 12s; font-size: 1.5rem; color:var(--p5-yellow);">★</div>
        <div class="shape shape-shard" style="left: 20%; width: 60px; height: 60px; animation-delay: 0s;"></div>
        <div class="shape shape-shard" style="left: 70%; width: 40px; height: 40px; animation-delay: 5s;"></div>
        <div class="shape shape-shard"
            style="left: 45%; width: 80px; height: 80px; animation-delay: 2s; background: var(--p5-black);"></div>
        <div class="shape shape-jagged" style="top: 80%; left: 5%; animation-duration: 3s;"></div>
        <div class="shape shape-jagged" style="top: 20%; right: 5%; animation-duration: 4s; transform: scale(0.5);">
        </div>
    </div>

    <nav class="top-nav">
        <a href="#" class="brand-logo" onclick="filterPosts('HOME'); return false;">Youlai Note</a>
        <div class="menu-list">
            <a href="#" id="btn-home" class="menu-btn active" onclick="filterPosts('HOME'); return false;">HOME</a>
            <a href="#" id="btn-unity" class="menu-btn" onclick="filterPosts('UNITY'); return false;">UNITY</a>
            <a href="#" id="btn-shader" class="menu-btn" onclick="filterPosts('SHADER'); return false;">SHADER</a>
            <a href="/posts/about" id="btn-about" class="menu-btn">ABOUT</a>

            <div class="search-box">
                <input type="text" id="search-input" placeholder="SEARCH LOGS..." oninput="searchPosts(this.value)">
                <i class="fas fa-search search-icon"></i>
            </div>
        </div>
    </nav>

    <div class="container">
        <div style="flex:3; display:flex; flex-direction:column;">
            <main class="content-area" id="blog-list-container">
                <!-- Astro Server-Side Rendering -->
                {allPosts.map((post) => (
                    <article class="post-entry" onclick={`location.href='/posts/${post.id}'`}>
                        {post.cover && <div class="post-cover" style={`background-image: url('${post.cover}');`}></div>}
                        <div class="post-content-wrap">
                            <div class="post-meta">{post.date} <span class="post-tag">{Array.isArray(post.tags) ? post.tags.join(' / ') : post.tags}</span></div>
                            <h2 class="post-title">{post.title}</h2>
                            <p class="post-summary">{post.summary}</p>
                        </div>
                    </article>
                ))}
            </main>
        </div>

        <aside class="sidebar-area">
            <div class="widget-box">
                <div class="widget-title">OWNER</div>
                <div class="profile-mini">
                    <img src="/posts/头像.jpg" alt="Avatar" onerror="this.src='https://placehold.co/60x60'">
                    <div>
                        <div style="font-weight:900; color:var(--p5-white);">又来</div>
                        <div style="font-size:0.8rem; color:#aaa;">Unity Developer</div>
                    </div>
                </div>
                <!-- 社交媒体链接 -->
                <div class="social-links" id="social-links-container"></div>
                <!-- 邮箱显示区域 -->
                <div id="email-display" class="email-box" style="display:none;">
                    <i class="fas fa-envelope"></i> <span id="email-text"></span>
                </div>
            </div>
            <div class="widget-box">
                <div class="widget-title">CATEGORIES</div>
                <div class="tag-cloud">
                    <a href="#" class="tag-item" onclick="filterPosts('UNITY'); return false;"># UNITY3D</a>
                    <a href="#" class="tag-item" onclick="filterPosts('CSHARP'); return false;"># CSHARP</a>
                    <a href="#" class="tag-item" onclick="filterPosts('SHADER'); return false;"># SHADER</a>
                    <a href="#" class="tag-item" onclick="filterPosts('MULTIPLAYER'); return false;"># MULTIPLAYER</a>
                    <a href="#" class="tag-item" onclick="filterPosts('VR'); return false;"># VR/AR</a>
                </div>
            </div>
        </aside>
    </div>

    <footer class="footer-bar">
        <div class="marquee-wrap">
            <div class="marquee-content">
                Loading...
            </div>
        </div>
        <div class="footer-info">
            <div><span style="font-weight:900; color:var(--p5-yellow);">© 2025 LIU MINGLIANG.</span> All code is
                compiled.</div>
        </div>
    </footer>

    <script is:inline src="/js/model.js"></script>
    <script is:inline src="/js/index.js"></script>
</body>

</html>
